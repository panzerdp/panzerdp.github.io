import{d as W,n as X,m as y,p as le,q as ce,t as ue,w as de,a as he,r as N,v as pe,x as fe,_ as ve}from"./index-e437eb82.js";const _e=W({__name:"BaseSelect",props:{value:null,options:null},emits:["input"],setup(e,{emit:t}){return{__sfc:!0,emit:t,onChange:a=>{t("input",a.target.value)}}}});var $e=function(){var t=this,n=t._self._c,a=t._self._setupProxy;return n("select",{staticClass:"select",domProps:{value:t.value},on:{change:a.onChange}},t._l(t.options,function({value:r,text:s}){return n("option",{key:r,domProps:{value:r}},[t._v(t._s(s))])}),0)},ye=[],ge=X(_e,$e,ye,!1,null,null,null,null);const Qs=ge.exports;function be(e,t){for(var n=-1,a=e==null?0:e.length,r=0,s=[];++n<a;){var o=e[n];t(o,n,e)&&(s[r++]=o)}return s}var me=be;function Se(e){return e}var J=Se;function Ce(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Ae=Ce,Te=Ae,j=Math.max;function xe(e,t,n){return t=j(t===void 0?e.length-1:t,0),function(){for(var a=arguments,r=-1,s=j(a.length-t,0),o=Array(s);++r<s;)o[r]=a[t+r];r=-1;for(var i=Array(t+1);++r<t;)i[r]=a[r];return i[t]=n(o),Te(e,this,i)}}var Le=xe;function Oe(e){return function(){return e}}var we=Oe,Ee=typeof y=="object"&&y&&y.Object===Object&&y,Ie=Ee,Ne=Ie,je=typeof self=="object"&&self&&self.Object===Object&&self,He=Ne||je||Function("return this")(),b=He,Pe=b,Fe=Pe.Symbol,L=Fe,H=L,K=Object.prototype,De=K.hasOwnProperty,Re=K.toString,$=H?H.toStringTag:void 0;function Me(e){var t=De.call(e,$),n=e[$];try{e[$]=void 0;var a=!0}catch(s){}var r=Re.call(e);return a&&(t?e[$]=n:delete e[$]),r}var ze=Me,Ge=Object.prototype,ke=Ge.toString;function Ue(e){return ke.call(e)}var qe=Ue,P=L,Be=ze,Ve=qe,We="[object Null]",Xe="[object Undefined]",F=P?P.toStringTag:void 0;function Je(e){return e==null?e===void 0?Xe:We:F&&F in Object(e)?Be(e):Ve(e)}var Y=Je;function Ke(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Z=Ke,Ye=Y,Ze=Z,Qe="[object AsyncFunction]",et="[object Function]",tt="[object GeneratorFunction]",nt="[object Proxy]";function at(e){if(!Ze(e))return!1;var t=Ye(e);return t==et||t==tt||t==Qe||t==nt}var Q=at,rt=b,st=rt["__core-js_shared__"],ot=st,T=ot,D=function(){var e=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function it(e){return!!D&&D in e}var lt=it,ct=Function.prototype,ut=ct.toString;function dt(e){if(e!=null){try{return ut.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var ht=dt,pt=Q,ft=lt,vt=Z,_t=ht,$t=/[\\^$.*+?()[\]{}|]/g,yt=/^\[object .+?Constructor\]$/,gt=Function.prototype,bt=Object.prototype,mt=gt.toString,St=bt.hasOwnProperty,Ct=RegExp("^"+mt.call(St).replace($t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(e){if(!vt(e)||ft(e))return!1;var t=pt(e)?Ct:yt;return t.test(_t(e))}var Tt=At;function xt(e,t){return e==null?void 0:e[t]}var Lt=xt,Ot=Tt,wt=Lt;function Et(e,t){var n=wt(e,t);return Ot(n)?n:void 0}var m=Et,It=m,Nt=function(){try{var e=It(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),jt=Nt,Ht=we,R=jt,Pt=J,Ft=R?function(e,t){return R(e,"toString",{configurable:!0,enumerable:!1,value:Ht(t),writable:!0})}:Pt,Dt=Ft,Rt=800,Mt=16,zt=Date.now;function Gt(e){var t=0,n=0;return function(){var a=zt(),r=Mt-(a-n);if(n=a,r>0){if(++t>=Rt)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var kt=Gt,Ut=Dt,qt=kt,Bt=qt(Ut),Vt=Bt,Wt=J,Xt=Le,Jt=Vt;function Kt(e,t){return Jt(Xt(e,t,Wt),e+"")}var Yt=Kt,Zt=m,Qt=Zt(Object,"create"),S=Qt,M=S;function en(){this.__data__=M?M(null):{},this.size=0}var tn=en;function nn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var an=nn,rn=S,sn="__lodash_hash_undefined__",on=Object.prototype,ln=on.hasOwnProperty;function cn(e){var t=this.__data__;if(rn){var n=t[e];return n===sn?void 0:n}return ln.call(t,e)?t[e]:void 0}var un=cn,dn=S,hn=Object.prototype,pn=hn.hasOwnProperty;function fn(e){var t=this.__data__;return dn?t[e]!==void 0:pn.call(t,e)}var vn=fn,_n=S,$n="__lodash_hash_undefined__";function yn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_n&&t===void 0?$n:t,this}var gn=yn,bn=tn,mn=an,Sn=un,Cn=vn,An=gn;function f(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}f.prototype.clear=bn;f.prototype.delete=mn;f.prototype.get=Sn;f.prototype.has=Cn;f.prototype.set=An;var Tn=f;function xn(){this.__data__=[],this.size=0}var Ln=xn;function On(e,t){return e===t||e!==e&&t!==t}var wn=On,En=wn;function In(e,t){for(var n=e.length;n--;)if(En(e[n][0],t))return n;return-1}var C=In,Nn=C,jn=Array.prototype,Hn=jn.splice;function Pn(e){var t=this.__data__,n=Nn(t,e);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():Hn.call(t,n,1),--this.size,!0}var Fn=Pn,Dn=C;function Rn(e){var t=this.__data__,n=Dn(t,e);return n<0?void 0:t[n][1]}var Mn=Rn,zn=C;function Gn(e){return zn(this.__data__,e)>-1}var kn=Gn,Un=C;function qn(e,t){var n=this.__data__,a=Un(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}var Bn=qn,Vn=Ln,Wn=Fn,Xn=Mn,Jn=kn,Kn=Bn;function v(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}v.prototype.clear=Vn;v.prototype.delete=Wn;v.prototype.get=Xn;v.prototype.has=Jn;v.prototype.set=Kn;var Yn=v,Zn=m,Qn=b,ea=Zn(Qn,"Map"),ta=ea,z=Tn,na=Yn,aa=ta;function ra(){this.size=0,this.__data__={hash:new z,map:new(aa||na),string:new z}}var sa=ra;function oa(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ia=oa,la=ia;function ca(e,t){var n=e.__data__;return la(t)?n[typeof t=="string"?"string":"hash"]:n.map}var A=ca,ua=A;function da(e){var t=ua(this,e).delete(e);return this.size-=t?1:0,t}var ha=da,pa=A;function fa(e){return pa(this,e).get(e)}var va=fa,_a=A;function $a(e){return _a(this,e).has(e)}var ya=$a,ga=A;function ba(e,t){var n=ga(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}var ma=ba,Sa=sa,Ca=ha,Aa=va,Ta=ya,xa=ma;function _(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}_.prototype.clear=Sa;_.prototype.delete=Ca;_.prototype.get=Aa;_.prototype.has=Ta;_.prototype.set=xa;var La=_,Oa="__lodash_hash_undefined__";function wa(e){return this.__data__.set(e,Oa),this}var Ea=wa;function Ia(e){return this.__data__.has(e)}var Na=Ia,ja=La,Ha=Ea,Pa=Na;function g(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new ja;++t<n;)this.add(e[t])}g.prototype.add=g.prototype.push=Ha;g.prototype.has=Pa;var ee=g;function Fa(e,t,n,a){for(var r=e.length,s=n+(a?1:-1);a?s--:++s<r;)if(t(e[s],s,e))return s;return-1}var Da=Fa;function Ra(e){return e!==e}var Ma=Ra;function za(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1}var Ga=za,ka=Da,Ua=Ma,qa=Ga;function Ba(e,t,n){return t===t?qa(e,t,n):ka(e,Ua,n)}var Va=Ba,Wa=Va;function Xa(e,t){var n=e==null?0:e.length;return!!n&&Wa(e,t,0)>-1}var te=Xa;function Ja(e,t,n){for(var a=-1,r=e==null?0:e.length;++a<r;)if(n(t,e[a]))return!0;return!1}var ne=Ja;function Ka(e,t){for(var n=-1,a=e==null?0:e.length,r=Array(a);++n<a;)r[n]=t(e[n],n,e);return r}var Ya=Ka;function Za(e){return function(t){return e(t)}}var Qa=Za;function er(e,t){return e.has(t)}var ae=er,tr=ee,nr=te,ar=ne,rr=Ya,sr=Qa,or=ae,ir=200;function lr(e,t,n,a){var r=-1,s=nr,o=!0,i=e.length,l=[],u=t.length;if(!i)return l;n&&(t=rr(t,sr(n))),a?(s=ar,o=!1):t.length>=ir&&(s=or,o=!1,t=new tr(t));e:for(;++r<i;){var c=e[r],d=n==null?c:n(c);if(c=a||c!==0?c:0,o&&d===d){for(var h=u;h--;)if(t[h]===d)continue e;l.push(c)}else s(t,d,a)||l.push(c)}return l}var cr=lr;function ur(e,t){for(var n=-1,a=t.length,r=e.length;++n<a;)e[r+n]=t[n];return e}var dr=ur;function hr(e){return e!=null&&typeof e=="object"}var O=hr,pr=Y,fr=O,vr="[object Arguments]";function _r(e){return fr(e)&&pr(e)==vr}var $r=_r,G=$r,yr=O,re=Object.prototype,gr=re.hasOwnProperty,br=re.propertyIsEnumerable,mr=G(function(){return arguments}())?G:function(e){return yr(e)&&gr.call(e,"callee")&&!br.call(e,"callee")},Sr=mr,Cr=Array.isArray,Ar=Cr,k=L,Tr=Sr,xr=Ar,U=k?k.isConcatSpreadable:void 0;function Lr(e){return xr(e)||Tr(e)||!!(U&&e&&e[U])}var Or=Lr,wr=dr,Er=Or;function se(e,t,n,a,r){var s=-1,o=e.length;for(n||(n=Er),r||(r=[]);++s<o;){var i=e[s];t>0&&n(i)?t>1?se(i,t-1,n,a,r):wr(r,i):a||(r[r.length]=i)}return r}var Ir=se,Nr=m,jr=b,Hr=Nr(jr,"Set"),Pr=Hr;function Fr(){}var Dr=Fr;function Rr(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n}var oe=Rr,x=Pr,Mr=Dr,zr=oe,Gr=1/0,kr=x&&1/zr(new x([,-0]))[1]==Gr?function(e){return new x(e)}:Mr,Ur=kr,qr=ee,Br=te,Vr=ne,Wr=ae,Xr=Ur,Jr=oe,Kr=200;function Yr(e,t,n){var a=-1,r=Br,s=e.length,o=!0,i=[],l=i;if(n)o=!1,r=Vr;else if(s>=Kr){var u=t?null:Xr(e);if(u)return Jr(u);o=!1,r=Wr,l=new qr}else l=t?[]:i;e:for(;++a<s;){var c=e[a],d=t?t(c):c;if(c=n||c!==0?c:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),i.push(c)}else r(l,d,n)||(l!==i&&l.push(d),i.push(c))}return i}var Zr=Yr,Qr=cr,es=Ir,q=Zr;function ts(e,t,n){var a=e.length;if(a<2)return a?q(e[0]):[];for(var r=-1,s=Array(a);++r<a;)for(var o=e[r],i=-1;++i<a;)i!=r&&(s[r]=Qr(s[r]||o,e[i],t,n));return q(es(s,1),t,n)}var ns=ts,as=9007199254740991;function rs(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=as}var ss=rs,os=Q,is=ss;function ls(e){return e!=null&&is(e.length)&&!os(e)}var cs=ls,us=cs,ds=O;function hs(e){return ds(e)&&us(e)}var ps=hs,fs=me,vs=Yt,_s=ns,$s=ps,ys=vs(function(e){return _s(fs(e,$s))}),gs=ys;const w=new Map,bs=(e,t,n)=>(e.tagName==="P"?B(e,t):Array.from(e.getElementsByTagName("p")).forEach(a=>B(a,t)),Array.from(w.values()).map(a=>`.readapt-${n} ${a}`).join(" ")),B=(e,t)=>{const n=Ss(e),{className:a,value:r}=ms(n,t);e.classList.add(a),w.set(a,r)},ms=(e,t)=>{const n=`#c8c8c8${t}`,a=e.toFixed(2)+"px",r=(2*e).toFixed(2)+"px",s=`readapt-shade-alternate-lines-${a.replace(/\./,"-")}`;return{className:s,value:`.${s} {
      background: repeating-linear-gradient(transparent, transparent ${a}, ${n} ${a}, ${n} ${r});
      background-clip: content-box;
      background-origin: content-box;
    }`}},Ss=e=>{const t=e.querySelector(".readapt-content"),n=getComputedStyle(t||e),a=parseInt(n.fontSize,10),r=n.lineHeight==="normal"?1.2*a:parseFloat(n.lineHeight),s=Math.max(Cs(e),t==null?void 0:t.getBoundingClientRect().height);let o=0;if(!isNaN(s)){const i=Math.max(r,a),l=Math.round(s/i);l>0&&(o=s/l)}return Math.max(r,o)},Cs=e=>{const t=getComputedStyle(e),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom);return e.getBoundingClientRect().height-n},As=e=>{const t=Array.from(w.keys()),n=a=>a.classList.remove(...t);e.tagName==="P"?n(e):Array.from(e.getElementsByTagName("p")).forEach(n)},Ts=(e,t)=>{const{fontFamily:n,fontSize:a,letterSpacing:r,wordSpacing:s,lineSpacing:o}=e,i=n!==le[0].value?`font-family: ${n};`:"",l=a!==ce[0].value?`font-size: ${a};`:"font-size: inherit;",u=r!==ue[0].value?`letter-spacing: ${r};`:"",c=s!==de[0].value?`word-spacing: ${s};`:"",d=o!==he[0].value?`line-height: ${e.lineSpacing};`:"",h=i+l+u+c+d;return`
    ${t} .readapt-content { ${h} }
    ${t} .readapt-content > span { font-size: inherit }
    ${t} .readapt-content .readapt-bold { font-weight: bold }
  `},xs=(e,t)=>{const n=t?`.${t}`:"";return Ts(e,n)},Ls=(e,t)=>gs(e,t).length===0,Os=e=>(t,n,a)=>{const r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:i=>{const l=i.parentElement;return l&&["STYLE","SCRIPT","NOSCRIPT"].includes(l.tagName)||!i.nodeValue||!/\S/.test(i.nodeValue)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),s=Ps(e,n,a);let o;for(;o=r.nextNode();)try{s(o)}catch(i){console.warn("Error when adapting text",o)}},ws=(e,t)=>Ls(e,t.classList),Es=e=>{const t=e.syllableActive&&(!!e.syllableColor1||!!e.syllableColor2),n=e.phonemesActive&&V(e.phonemes),a=e.lettersActive&&V(e.letters),r=!!e.liaisonsActive;return t||e.silentLetterActive||a||n||r},V=e=>e.some(t=>t.active),Is=(e,t)=>{const n=t.findIndex(([a,r])=>e>=a&&e<=r);if(n!==-1)return n%2?"readapt-syllable-2":"readapt-syllable-1"},Ns=(e,t)=>t.find(([n,a])=>e>=n&&e<=a),js=(e,t)=>{const n=t.toLowerCase(),a=e.letters.filter(({active:s})=>s).find(s=>{var o;return(o=s.value)===null||o===void 0?void 0:o.includes(n)});if(!a)return[];const r=[`readapt-letter-${a.key}`];return a.bold&&r.push("readapt-bold"),r},Hs=(e,t)=>{const n=e.phonemes.find(({active:r,key:s})=>r&&t===parseInt(s)),a=[];return n&&(a.push(`readapt-phoneme-${n.key}`),n.bold&&a.push("readapt-bold")),a},Ps=(e,t,n)=>a=>{const r=a.nodeValue;if(!r)return;const s=document.createElement("span");if(s.classList.add("readapt-content"),a.before(s),!Es(t)){s.textContent=a.textContent,a.textContent="";return}const o=e(r,t.language);r.split("").forEach((i,l)=>{const u=[];if(t.syllableActive){const p=Is(l,o.syllables);p&&u.push(p)}if(t.liaisonsActive&&o.liaisons){const p=Ns(l,o.liaisons);if(p){const[E,ie,I]=p;n.add(I),E===l?u.push("readapt-liaison-start",`readapt-liaison-${I}`):E+1===l?u.push("readapt-liaison-symbol"):ie===l&&u.push("readapt-liaison-end")}}let c=!1;const d=o.phonemes[l];if(t.phonemesActive&&typeof d=="number"){const p=Hs(t,d);c=p.length>0,u.push(...p)}if(t.lettersActive&&!c){const p=js(t,i);u.push(...p)}t.silentLetterActive&&o.silentLetters.includes(l)&&u.push("readapt-silent-letter");const h=s.lastChild;if(u.length>0)if((h==null?void 0:h.nodeType)===Node.ELEMENT_NODE&&ws(u,h))h.textContent+=i;else{const p=document.createElement("span");p.classList.add(...u),p.textContent=i,s.appendChild(p)}else(h==null?void 0:h.nodeType)===Node.TEXT_NODE?h.textContent+=i:s.appendChild(document.createTextNode(i))}),a.textContent=""},Fs=(e,t,n)=>{const a=t?`.${t}`:"";let r=Ds(e,a);return r+=Rs(e,a),r+=zs(e,a),r+=Ms(e,a),r+=Gs(e,n,a),r},Ds=(e,t)=>{if(!e.syllableActive)return"";const{syllableOpacity:n,syllableColor1:a,syllableColor2:r}=e,s=a?`${t} .readapt-syllable-1 { background-color: ${a}${n} !important }`:"",o=r?`${t} .readapt-syllable-2 { background-color: ${r}${n} !important }`:"";return s+o},Rs=(e,t)=>e.lettersActive?e.letters.filter(({active:n,color:a})=>n&&a).reduce((n,a)=>n+`${t} .readapt-letter-${a.key} { color: ${a.color} }`,""):"",Ms=(e,t)=>e.phonemesActive?e.phonemes.filter(({active:n,color:a})=>n&&a).reduce((n,a)=>n+`${t} .readapt-phoneme-${a.key} { color: ${a.color} }`,""):"",zs=(e,t)=>{if(!e.silentLetterActive)return"";const n="128, 128, 128",{silentLetterOpacity:a}=e;return`${t} .readapt-silent-letter { color:rgba(${n}, ${a})}`},Gs=(e,t,n)=>{if(!e.liaisonsActive||t.size===0)return"";const{liaisonsOpacity:a}=e,r="#000000"+a,s=[...t.values()].reduce((u,c)=>{const d=`${n} .readapt-liaison-${c}::after { content: '${c}'; position: absolute; right: 0; top: 90%; font-family: Arial; font-size: 70%; color: ${r}; line-height: initial !important;}`;return`${u} ${n} .readapt-liaison-${c} { position: relative } ${d}`},""),o=`${n} .readapt-liaison-start { position: relative; outline: 1px solid ${r} }`,i=`${n} .readapt-liaison-end { position: relative; outline: 1px solid ${r} }`,l=`${n} .readapt-liaison-symbol { position: relative; bottom: -2px; border-bottom: 1px solid ${r}; border-radius: 0 0 30% 30% }`;return`${s} ${o} ${i} ${l}`},ks=e=>(t,n,a)=>{const r=`readapt-${a}`;t.classList.add(r);let s=xs(n,r);const o=Os(e),i=new Set;o(t,n,i);const l=Fs(n,r,i);s+=l;const u=Us(a);u.textContent!==s&&(u.textContent=s);const c=Bs();if(t.setAttribute("data-readapt-id",c),As(t),n.shadeAlternateLinesActive){const d=bs(t,n.shadeAlternateLinesOpacity,a);u.textContent+=" "+d}},Us=e=>{let t=document.head.querySelector(`[data-readapt-style=${e}]`);return t||(t=document.createElement("style"),t.setAttribute("type","text/css"),t.setAttribute("data-readapt-style",e),document.head.appendChild(t),t)},qs=e=>{const t=document.head.querySelector(`[data-readapt-style=${e}]`);t&&t.remove()},Bs=()=>Math.random().toString(24).substring(4),Vs=e=>ks(e),eo=(e,t)=>{var n;const a=e.find(({key:s})=>s===t.key),r=(n=a==null?void 0:a.examples)!==null&&n!==void 0?n:[];return Ws(r,t)},Ws=(e,{color:t,bold:n})=>{const s=`${t?`color: ${t};`:""} ${n?"font-weight: bold;":""}`;return e.map(o=>o.replace(/<span>/g,`<span style="${s}">`)).map(o=>`<span>${o}</span>`).join(",&nbsp;")},Xs=W({__name:"AdaptContainer",props:{contentToAdapt:null,settings:null,scope:{default:"preview"},adaptHtmlElementAsync:null},setup(e){const t=e,n=N(!0),a=N(),r=async()=>{a.value&&t.contentToAdapt&&t.adaptHtmlElementAsync&&(a.value.innerHTML=t.contentToAdapt,(await t.adaptHtmlElementAsync)(a.value,t.settings,t.scope),n.value=!1)};return pe(()=>({...t,containerElement:a}),r,{deep:!0,flush:"post"}),fe(()=>qs(t.scope)),{__sfc:!0,props:t,isLoading:n,containerElement:a,adaptContent:r}}});var Js=function(){var t=this,n=t._self._c,a=t._self._setupProxy;return n("div",[a.isLoading?[n("div",{staticClass:"flex h-full flex-col content-center items-center"},[n("div",{staticClass:"text-xl"},[t._v(t._s(t.$t("LOADING"))+"...")])])]:t._e(),n("div",{class:{"opacity-50":a.isLoading}},[n("div",{ref:"containerElement"})])],2)},Ks=[],Ys=X(Xs,Js,Ks,!1,null,null,null,null);const to=Ys.exports,no=async()=>{const{analyse:e}=await ve(()=>import("./readapt-text-engine.esm-b94dfae0.js"),[]);return Vs(e)};export{to as A,Qs as B,no as a,eo as b};
