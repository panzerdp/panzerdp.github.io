import{d as g,h as T,v as W,x as V,n as m,y as j,z as Y,g as J,c as S,M as tt,S as N,A as et,U as G,B as F,C as k,D as B,E as D,F as w,G as st,H as M,u as P,I as nt,J as x,b as at,K as lt,L as R,N as it,k as rt,a as U,l as h,p as ot,q as ct,O as ut,t as pt,o as _t,s as dt,w as ft,R as vt,i as gt,P as mt,r as Tt,j as Et}from"./index-1bd35186.js";import{$ as St,_ as bt,Z as Ct,a0 as xt}from"./adaptHtmlElementAsync-5d62850d.js";const Pt=g({__name:"AdaptContainer",props:{contentToAdapt:null,settings:null,scope:{default:"preview"},adaptHtmlElementAsync:null},setup(n){const t=n,e=T(!0),s=T(),a=async()=>{s.value&&t.contentToAdapt&&t.adaptHtmlElementAsync&&(s.value.innerHTML=t.contentToAdapt,(await t.adaptHtmlElementAsync)(s.value,t.settings,t.scope),e.value=!1)};return W(()=>({...t,containerElement:s}),a,{deep:!0,flush:"post"}),V(()=>St(t.scope)),{__sfc:!0,props:t,isLoading:e,containerElement:s,adaptContent:a}}});var yt=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",[s.isLoading?[e("div",{staticClass:"flex h-full flex-col content-center items-center"},[e("div",{staticClass:"text-xl"},[t._v(t._s(t.$t("LOADING"))+"...")])])]:t._e(),e("div",{class:{"opacity-50":s.isLoading}},[e("div",{ref:"containerElement"})])],2)},At=[],ht=m(Pt,yt,At,!1,null,null,null,null);const It=ht.exports,Lt=g({__name:"PreviewContainer",props:{contentToAdapt:null},emits:["update"],setup(n,{emit:t}){const e=T(),s=T(!0);return{__sfc:!0,emit:t,textToAdaptElement:e,isReading:s,onRead:()=>{s.value=!0;const r=j(e).value;/\S/.test(r)&&t("update",r)},onEdit:()=>{s.value=!1,setTimeout(()=>{var i;return(i=e.value)==null?void 0:i.focus()})}}}});var wt=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{class:{"p-3":!s.isReading}},[e("textarea",{ref:"textToAdaptElement",staticClass:"textarea mx-2 max-h-full w-full",attrs:{rows:"5",hidden:s.isReading},domProps:{value:t.contentToAdapt},on:{blur:s.onRead}}),s.isReading?e("div",{staticClass:"m-px cursor-pointer hover:outline-1 hover:outline-gray-200 hover:outline",on:{click:s.onEdit}},[t._t("default",function(){return[e("div",{domProps:{innerHTML:t._s(t.contentToAdapt)}})]})],2):t._e()])},Ot=[],Rt=m(Lt,wt,Ot,!1,null,null,null,null);const $t=Rt.exports;function Nt(n){const t=T(""),e=s=>t.value=s;return Y(()=>{t.value=J(n.value).textPreview}),{text:t,updateText:e}}const Gt=g({__name:"TextAdaptationPreview",props:{settings:null},setup(n){const t=n,{text:e,updateText:s}=Nt(S(()=>t.settings.language));return{__sfc:!0,props:t,text:e,updateText:s,AdaptContainer:It,PreviewContainer:$t,adaptHtmlElementAsyncFn:bt}}});var Ft=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e(s.PreviewContainer,{attrs:{"content-to-adapt":s.text},on:{update:s.updateText}},[e(s.AdaptContainer,{attrs:{"adapt-html-element-async":s.adaptHtmlElementAsyncFn(),"content-to-adapt":t.$sanitize("<p>"+s.text+"</p>"),settings:t.settings}})],1)},kt=[],Bt=m(Gt,Ft,kt,!1,null,null,null,null);const Dt=Bt.exports;var Mt="__lodash_hash_undefined__";function Ut(n){return this.__data__.set(n,Mt),this}function Ht(n){return this.__data__.has(n)}function L(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new tt;++t<e;)this.add(n[t])}L.prototype.add=L.prototype.push=Ut;L.prototype.has=Ht;function Xt(n,t){for(var e=-1,s=n==null?0:n.length;++e<s;)if(t(n[e],e,n))return!0;return!1}function qt(n,t){return n.has(t)}var zt=1,Wt=2;function K(n,t,e,s,a,l){var i=e&zt,r=n.length,o=t.length;if(r!=o&&!(i&&o>r))return!1;var p=l.get(n),_=l.get(t);if(p&&_)return p==t&&_==n;var u=-1,c=!0,d=e&Wt?new L:void 0;for(l.set(n,t),l.set(t,n);++u<r;){var f=n[u],v=t[u];if(s)var E=i?s(v,f,u,t,n,l):s(f,v,u,n,t,l);if(E!==void 0){if(E)continue;c=!1;break}if(d){if(!Xt(t,function(b,C){if(!qt(d,C)&&(f===b||a(f,b,e,s,l)))return d.push(C)})){c=!1;break}}else if(!(f===v||a(f,v,e,s,l))){c=!1;break}}return l.delete(n),l.delete(t),c}function Yt(n){var t=-1,e=Array(n.size);return n.forEach(function(s,a){e[++t]=[a,s]}),e}function Jt(n){var t=-1,e=Array(n.size);return n.forEach(function(s){e[++t]=s}),e}var Kt=1,Zt=2,Qt="[object Boolean]",Vt="[object Date]",jt="[object Error]",te="[object Map]",ee="[object Number]",se="[object RegExp]",ne="[object Set]",ae="[object String]",le="[object Symbol]",ie="[object ArrayBuffer]",re="[object DataView]",H=N?N.prototype:void 0,O=H?H.valueOf:void 0;function oe(n,t,e,s,a,l,i){switch(e){case re:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case ie:return!(n.byteLength!=t.byteLength||!l(new G(n),new G(t)));case Qt:case Vt:case ee:return et(+n,+t);case jt:return n.name==t.name&&n.message==t.message;case se:case ae:return n==t+"";case te:var r=Yt;case ne:var o=s&Kt;if(r||(r=Jt),n.size!=t.size&&!o)return!1;var p=i.get(n);if(p)return p==t;s|=Zt,i.set(n,t);var _=K(r(n),r(t),s,a,l,i);return i.delete(n),_;case le:if(O)return O.call(n)==O.call(t)}return!1}var ce=1,ue=Object.prototype,pe=ue.hasOwnProperty;function _e(n,t,e,s,a,l){var i=e&ce,r=F(n),o=r.length,p=F(t),_=p.length;if(o!=_&&!i)return!1;for(var u=o;u--;){var c=r[u];if(!(i?c in t:pe.call(t,c)))return!1}var d=l.get(n),f=l.get(t);if(d&&f)return d==t&&f==n;var v=!0;l.set(n,t),l.set(t,n);for(var E=i;++u<o;){c=r[u];var b=n[c],C=t[c];if(s)var $=i?s(C,b,c,t,n,l):s(b,C,c,n,t,l);if(!($===void 0?b===C||a(b,C,e,s,l):$)){v=!1;break}E||(E=c=="constructor")}if(v&&!E){var y=n.constructor,A=t.constructor;y!=A&&"constructor"in n&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof A=="function"&&A instanceof A)&&(v=!1)}return l.delete(n),l.delete(t),v}var de=1,X="[object Arguments]",q="[object Array]",I="[object Object]",fe=Object.prototype,z=fe.hasOwnProperty;function ve(n,t,e,s,a,l){var i=k(n),r=k(t),o=i?q:B(n),p=r?q:B(t);o=o==X?I:o,p=p==X?I:p;var _=o==I,u=p==I,c=o==p;if(c&&D(n)){if(!D(t))return!1;i=!0,_=!1}if(c&&!_)return l||(l=new w),i||st(n)?K(n,t,e,s,a,l):oe(n,t,o,e,s,a,l);if(!(e&de)){var d=_&&z.call(n,"__wrapped__"),f=u&&z.call(t,"__wrapped__");if(d||f){var v=d?n.value():n,E=f?t.value():t;return l||(l=new w),a(v,E,e,s,l)}}return c?(l||(l=new w),_e(n,t,e,s,a,l)):!1}function Z(n,t,e,s,a){return n===t?!0:n==null||t==null||!M(n)&&!M(t)?n!==n&&t!==t:ve(n,t,e,s,Z,a)}function ge(n,t){return Z(n,t)}const me=g({__name:"TextProfileEditDropdown",props:{value:null,settings:null},emits:["input"],setup(n,{emit:t}){const e=n,{preferences:s,getProfileById:a}=P(),{value:l,settings:i}=nt(e),r=_=>{var u;if(p()){const c=_.target.value?parseInt(_.target.value):null;t("input",c)}else _.target.value=String((u=e.value)!=null?u:"")},{t:o}=x(),p=()=>{var u;const _=l.value?(u=a(l.value))==null?void 0:u.settings:at("en");return _&&ge(_,i.value)?!0:confirm(o("SETTINGS.PROFILE_UNSAVED_CHANGES"))};return{__sfc:!0,preferences:s,getProfileById:a,props:e,value:l,settings:i,emit:t,onChange:r,t:o,validateUnsavedChanges:p}}});var Te=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("select",{staticClass:"select-secondary select select-sm",domProps:{value:s.value},on:{change:s.onChange}},[e("option",{attrs:{value:""}},[t._v(t._s(s.t("SETTINGS.PROFILE_NEW")))]),t._l(s.preferences.profiles,function({name:a,id:l}){return e("option",{key:l,domProps:{value:l}},[t._v(" "+t._s(a)+" ")])})],2)},Ee=[],Se=m(me,Te,Ee,!1,null,null,null,null);const be=Se.exports,Ce=g({__name:"TextProfileSaveButton",props:{value:null,settings:null},emits:["input"],setup(n,{emit:t}){const e=n,s=()=>e.value?o():p(),{preferences:a,createProfile:l,updateProfile:i}=P(),{t:r}=x(),o=()=>{i(e.value,{settings:e.settings}),alert(r("SETTINGS.PROFILE_UPDATED"))},p=async()=>{if(a.profiles.length===20){alert(r("SETTINGS.PROFILES_MAX"));return}const c=prompt(r("SETTINGS.PROFILE_GIVE_NAME"));if(!c)return;if(_(c)){alert(r("SETTINGS.PROFILE_NAME_EXISTS",{name:c}));return}const d=l({settings:e.settings,name:c});await lt(),t("input",d),alert(r("SETTINGS.PROFILE_CREATED"))},_=u=>a.profiles.some(({name:c})=>c===u);return{__sfc:!0,props:e,emit:t,onClick:s,preferences:a,createProfile:l,updateProfile:i,t:r,update:o,create:p,profileNameExists:_,BButton:Ct}}});var xe=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e(s.BButton,{attrs:{"data-test-id":"save",size:"sm",variant:"primary"},on:{click:s.onClick}},[t._v(" "+t._s(t.$t("SETTINGS.SAVE"))+" ")])},Pe=[],ye=m(Ce,xe,Pe,!1,null,null,null,null);const Ae=ye.exports,he=g({__name:"TextProfileRenameButton",props:{profileId:null},setup(n){const t=n,{preferences:e,updateProfile:s,getProfileById:a}=P(),{t:l}=x(),i=()=>{let o="";t.profileId&&(o=a(t.profileId).name);const p=prompt(l("SETTINGS.PROFILE_RENAME_TO"),o);p&&(r(p)?(s(t.profileId,{name:p}),alert(l("SETTINGS.PROFILE_RENAMED"))):alert(l("SETTINGS.PROFILE_NAME_EXISTS",{name:p})))},r=o=>!e.profiles.some(({name:_,id:u})=>u!==t.profileId&&_===o);return{__sfc:!0,preferences:e,updateProfile:s,getProfileById:a,props:t,t:l,onClick:i,isNameUnique:r,SvgIcon:R}}});var Ie=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return s.props.profileId?e("button",{staticClass:"btn-outline btn-secondary btn-sm btn",attrs:{title:s.t("SETTINGS.PROFILE_RENAME")},on:{click:s.onClick}},[e(s.SvgIcon,{staticClass:"h-4 w-4 fill-current",attrs:{id:"edit"}})],1):t._e()},Le=[],we=m(he,Ie,Le,!1,null,null,null,null);const Oe=we.exports,Re=g({__name:"TextProfileDeleteButton",props:{value:null},emits:["input"],setup(n,{emit:t}){const e=n,{deleteProfile:s}=P(),{t:a}=x();return{__sfc:!0,props:e,emit:t,deleteProfile:s,t:a,onClick:async()=>{confirm(a("SETTINGS.PROFILE_DELETE_CONFIRM"))&&(s(e.value),t("input",null),alert(a("SETTINGS.PROFILE_DELETED")))}}}});var $e=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return t.value?e("button",{staticClass:"btn-warning btn-sm btn",attrs:{"data-test-id":"delete"},on:{click:s.onClick}},[t._v(t._s(t.$t("SETTINGS.DELETE")))]):t._e()},Ne=[],Ge=m(Re,$e,Ne,!1,null,null,null,null);const Fe=Ge.exports;function ke(n){const t=T(),e=T("en"),{getProfileById:s}=P(),a=S(()=>t.value[e.value]),l=r=>e.value=r,i=({key:r,value:o})=>{a.value[r]=o};return Y(()=>{if(t.value=it(),e.value="en",n.value){const r=s(n.value);if(r){const{settings:o}=r;t.value[o.language]=rt(o),e.value=o.language}}}),{settings:a,changeLanguage:l,updateSettings:i}}const Be=g({__name:"BaseTabs",props:{names:null,value:null},emits:["input"],setup(n,{emit:t}){return{__sfc:!0,props:n,emit:t,emitInput:a=>t("input",a)}}});var De=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{staticClass:"tabs"},t._l(s.props.names,function(a,l){return e("div",{key:l,staticClass:"tab tab-bordered tab-lg",class:{"tab-active":l===t.value},attrs:{"data-test-id":"tab"},on:{click:function(i){return s.emitInput(l)}}},[t._v(" "+t._s(a)+" ")])}),0)},Me=[],Ue=m(Be,De,Me,!1,null,null,null,null);const He=Ue.exports,Xe=g({__name:"ColorPicker",props:{value:{default:""},colors:{default:()=>U}},emits:["selectColor"],setup(n,{emit:t}){const e=T(!1),s=()=>e.value=!0,a=()=>e.value=!1;return{__sfc:!0,emit:t,isModalOpened:e,openModal:s,closeModal:a,selectColor:i=>{a(),t("selectColor",i)},colors:U,SvgIcon:R}}});var qe=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",[e("button",{staticClass:"btn-ghost btn",attrs:{"data-test-id":"main-button"},on:{click:s.openModal}},[t.value?e("div",{staticClass:"h-8 w-8 rounded-full",style:{backgroundColor:t.value},attrs:{"data-test-id":"colored-icon"}}):e(s.SvgIcon,{staticClass:"h-8 w-8",attrs:{id:"forbidden","data-test-id":"missing-color-icon"}})],1),e("div",{staticClass:"modal",class:{"modal-open":s.isModalOpened},attrs:{"data-test-id":"modal"}},[e("div",{staticClass:"modal-box relative"},[e("label",{staticClass:"btn-sm btn-circle btn absolute right-2 top-2",on:{click:s.closeModal}},[t._v("✕")]),e("div",{staticClass:"flex flex-wrap"},[t._l(s.colors,function(a){return[e("button",{key:a,staticClass:"btn-circle btn m-2",class:{"outline outline-offset-2 outline-4 outline-black":a===t.value},style:{backgroundColor:`${a}`},attrs:{"data-test-id":"color-button"},on:{click:function(l){return s.selectColor(a)}}})]}),e("button",{staticClass:"btn-ghost btn-circle btn m-2",class:{"outline outline-offset-2 outline-4 outline-black":!t.value},attrs:{"data-test-id":"missing-color-button"},on:{click:function(a){return s.selectColor()}}},[e(s.SvgIcon,{staticClass:"h-full w-full",attrs:{id:"forbidden"}})],1)],2)])])])},ze=[],We=m(Xe,qe,ze,!1,null,null,null,null);const Q=We.exports,Ye=g({__name:"BaseSelect",props:{value:null,options:null},emits:["input"],setup(n,{emit:t}){return{__sfc:!0,emit:t,onChange:s=>{t("input",s.target.value)}}}});var Je=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("select",{staticClass:"select",domProps:{value:t.value},on:{change:s.onChange}},t._l(t.options,function({value:a,text:l}){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(l))])}),0)},Ke=[],Ze=m(Ye,Je,Ke,!1,null,null,null,null);const Qe=Ze.exports,Ve=g({__name:"SelectPercentage",props:{options:null,value:null},emits:["input"],setup(n,{emit:t}){const e=n,s=S(()=>{const _=e.options.findIndex(u=>u.value===e.value);return _===-1?0:_}),a=S(()=>e.options[s.value].text),l=S(()=>s.value>0),i=S(()=>s.value<e.options.length-1),r=()=>{if(l.value){const _=e.options[s.value-1].value;t("input",_)}},o=()=>{if(i.value){const _=e.options[s.value+1].value;t("input",_)}},{t:p}=x();return{__sfc:!0,props:e,emit:t,currentIndex:s,currentValue:a,hasLessOptions:l,hasMoreOptions:i,onMinus:r,onPlus:o,t:p,SvgIcon:R}}});var je=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{staticClass:"flex items-center justify-between"},[e("button",{staticClass:"btn-ghost btn",class:{"bg-transparent btn-disabled":!s.hasLessOptions},attrs:{"data-test-id":"btn-minus"},on:{click:s.onMinus}},[e(s.SvgIcon,{staticClass:"h-6 w-6 fill-current",attrs:{id:"minus"}})],1),e("div",{staticClass:"w-28 text-center font-semibold",attrs:{"data-test-id":"value"}},[t._v(t._s(s.t(s.currentValue)))]),e("button",{staticClass:"btn-ghost btn",class:{"bg-transparent btn-disabled":!s.hasMoreOptions},attrs:{"data-test-id":"btn-plus"},on:{click:s.onPlus}},[e(s.SvgIcon,{staticClass:"h-6 w-6 fill-current",attrs:{id:"plus"}})],1)])},ts=[],es=m(Ve,je,ts,!1,null,null,null,null);const ss=es.exports,ns=g({__name:"TextProfileFormGeneralTab",props:{settings:null},emits:["change-language","update"],setup(n,{emit:t}){const e=n,s=({key:o,value:p})=>t("update",{key:o,value:p}),a=({key:o})=>{t("update",{key:o,value:!e.settings[o]})},l=o=>t("change-language",o),i=()=>e.settings.shadeAlternateLinesActive?h.slice(1):h,r=T(i());return W(()=>e.settings.shadeAlternateLinesActive,()=>{r.value=i(),r.value.length!==h.length&&e.settings.lineSpacing===h[0].value&&s({key:"lineSpacing",value:r.value[0].value})}),{__sfc:!0,props:e,emit:t,emitUpdate:s,emitUpdateToggled:a,changeLanguage:l,optimizeLineSpacingOptions:i,lineSpacingOptionsOptimized:r,fontFamilyOptions:ot,fontSizeOptions:ct,languageOptions:ut,letterSpacingOptions:pt,opacityOptions:_t,silentLetterOpacityOptions:dt,wordSpacingOptions:ft,ColorPicker:Q,RangeBar:vt,BaseSelect:Qe,SelectPercentage:ss}}});var as=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{staticClass:"relative h-general-settings overflow-scroll"},[e("table",{staticClass:"table w-full"},[e("thead",[e("tr",[e("th",{staticClass:"sticky top-0"}),e("th",{staticClass:"sticky top-0"}),e("th",{staticClass:"sticky top-0 whitespace-normal"},[t._v(t._s(t.$t("GENERAL.SETTING")))]),e("th",{staticClass:"sticky top-0 whitespace-normal"},[t._v(t._s(t.$t("GENERAL.OPACITY")))]),e("th",{staticClass:"sticky top-0 whitespace-normal"},[t._v(t._s(t.$t("GENERAL.ACTIVATE")))])])]),e("tbody",[e("tr",[e("td",{staticClass:"whitespace-normal font-bold"},[t._v(t._s(t.$t("GENERAL.PROFILE_LANGUAGE")))]),e("td"),e("td",[e(s.BaseSelect,{staticClass:"select-secondary select select-sm w-full",attrs:{options:s.languageOptions,value:t.settings.language},on:{input:function(a){return s.changeLanguage(a)}}})],1),e("td"),e("td")]),e("tr",[e("td",{staticClass:"whitespace-normal font-bold",attrs:{rowspan:"2"}},[t._v(" "+t._s(t.$t("GENERAL.FONT_SETTINGS"))+" ")]),e("td",{staticClass:"whitespace-normal"},[t._v(t._s(t.$t("GENERAL.FONT")))]),e("td",[e(s.BaseSelect,{staticClass:"select-secondary select select-sm w-full",attrs:{options:s.fontFamilyOptions,value:t.settings.fontFamily},on:{input:function(a){return s.emitUpdate({key:"fontFamily",value:a})}}})],1),e("td"),e("td")]),e("tr",[e("td",{staticClass:"whitespace-normal"},[t._v(t._s(t.$t("GENERAL.FONT_SIZE")))]),e("td",[e(s.SelectPercentage,{staticClass:"w-full",attrs:{options:s.fontSizeOptions,value:t.settings.fontSize},on:{input:function(a){return s.emitUpdate({key:"fontSize",value:a})}}})],1),e("td"),e("td")]),e("tr",[e("td",{staticClass:"whitespace-normal font-bold",attrs:{rowspan:"3"}},[t._v(" "+t._s(t.$t("GENERAL.SPACING"))+" ")]),e("td",{staticClass:"whitespace-normal"},[t._v(t._s(t.$t("GENERAL.LETTER_SPACING")))]),e("td",[e(s.SelectPercentage,{attrs:{options:s.letterSpacingOptions,value:t.settings.letterSpacing},on:{input:function(a){return s.emitUpdate({key:"letterSpacing",value:a})}}})],1),e("td"),e("td")]),e("tr",[e("td",{staticClass:"whitespace-normal"},[t._v(t._s(t.$t("GENERAL.WORD_SPACING")))]),e("td",[e(s.SelectPercentage,{attrs:{options:s.wordSpacingOptions,value:t.settings.wordSpacing},on:{input:function(a){return s.emitUpdate({key:"wordSpacing",value:a})}}})],1),e("td"),e("td")]),e("tr",[e("td",{staticClass:"whitespace-normal"},[t._v(t._s(t.$t("GENERAL.LINE_SPACING")))]),e("td",[e(s.SelectPercentage,{attrs:{options:s.lineSpacingOptionsOptimized,value:t.settings.lineSpacing},on:{input:function(a){return s.emitUpdate({key:"lineSpacing",value:a})}}})],1),e("td"),e("td")]),e("tr",[e("td",{staticClass:"whitespace-normal font-bold",attrs:{rowspan:t.settings.language==="fr"?3:2}},[t._v(" "+t._s(t.$t("GENERAL.TEXT_HINTS"))+" ")]),e("td",{staticClass:"whitespace-normal"},[t._v(t._s(t.$t("GENERAL.HIGHLIGHT_ALTERNATING_SYLLABLES")))]),e("td",[e("div",{staticClass:"flex justify-center"},[e(s.ColorPicker,{staticClass:"m-1",attrs:{value:t.settings.syllableColor1},on:{selectColor:function(a){return s.emitUpdate({key:"syllableColor1",value:a})}}}),e(s.ColorPicker,{staticClass:"m-1",attrs:{value:t.settings.syllableColor2},on:{selectColor:function(a){return s.emitUpdate({key:"syllableColor2",value:a})}}})],1)]),e("td",[e(s.RangeBar,{attrs:{value:t.settings.syllableOpacity,options:s.opacityOptions},on:{input:function(a){return s.emitUpdate({key:"syllableOpacity",value:a})}}})],1),e("td",[e("input",{staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:t.settings.syllableActive},on:{input:function(a){return s.emitUpdateToggled({key:"syllableActive"})}}})])]),t.settings.language==="fr"?e("tr",[e("td",{staticClass:"whitespace-normal font-bold"},[t._v(t._s(t.$t("GENERAL.SHOW_LIAISONS")))]),e("td"),e("td",[e(s.RangeBar,{staticClass:"w-52",attrs:{disabled:t.settings.language==="en",value:t.settings.liaisonsOpacity,options:s.opacityOptions},on:{input:function(a){return s.emitUpdate({key:"liaisonsOpacity",value:a})}}})],1),e("td",[e("input",{staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:t.settings.liaisonsActive},on:{input:function(a){return s.emitUpdateToggled({key:"liaisonsActive"})}}})])]):t._e(),e("tr",[e("td",{staticClass:"whitespace-normal"},[t._v(t._s(t.$t("GENERAL.GREY_SILENT_LETTERS")))]),e("td"),e("td",[e(s.RangeBar,{staticClass:"w-52",attrs:{value:t.settings.silentLetterOpacity,options:s.silentLetterOpacityOptions},on:{input:function(a){return s.emitUpdate({key:"silentLetterOpacity",value:a})}}})],1),e("td",[e("input",{staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:t.settings.silentLetterActive},on:{input:function(a){return s.emitUpdateToggled({key:"silentLetterActive"})}}})])]),e("tr",[e("td",{staticClass:"whitespace-normal font-bold"},[t._v(t._s(t.$t("GENERAL.READING_TOOLS")))]),e("td",{staticClass:"whitespace-normal"},[t._v(t._s(t.$t("GENERAL.SHADE_ALTERNATE_LINES")))]),e("td"),e("td",[e(s.RangeBar,{staticClass:"w-52",attrs:{value:t.settings.shadeAlternateLinesOpacity,options:s.opacityOptions},on:{input:function(a){return s.emitUpdate({key:"shadeAlternateLinesOpacity",value:a})}}})],1),e("td",[e("input",{staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:t.settings.shadeAlternateLinesActive},on:{input:function(a){return s.emitUpdateToggled({key:"shadeAlternateLinesActive"})}}})])])])])])},ls=[],is=m(ns,as,ls,!1,null,null,null,null);const rs=is.exports,os=g({__name:"TextProfileFormItemsTab",props:{tableLabel:null,switchAllLabel:null,allItemsActive:{type:Boolean},items:null,options:null},emits:["update-items","update-active"],setup(n,{emit:t}){const e=n,s=u=>t("update-items",u),a=u=>{const c=u.target.checked;t("update-active",c)},{t:l}=x(),i=S(()=>[{key:"value",label:l(e.tableLabel)},{key:"example",label:l("SETTINGS.EXAMPLE")},{key:"color",label:l("SETTINGS.TEXT_COLOR")},{key:"bold",label:l("SETTINGS.BOLD")},{key:"activate",label:l("SETTINGS.ACTIVATE")}]),r=S(()=>e.items.map(u=>{const c=xt(e.options,u);return{...u,example:c}}));return{__sfc:!0,props:e,emit:t,updateOption:s,switchAllItems:a,t:l,tableFields:i,tableItems:r,switchBold:u=>{const c=e.items.slice(),d=c.findIndex(({key:v})=>v===u);if(d===-1)return;const f=c[d];c[d]={...f,bold:!f.bold},s(c)},switchActive:u=>{const c=e.items.slice(),d=c.findIndex(({key:v})=>v===u);if(d===-1)return;const f=c[d];c[d]={...f,active:!f.active},s(c)},setColor:(u,c)=>{const d=e.items.slice(),f=d.findIndex(({key:E})=>E===u);if(f===-1)return;const v=d[f];d[f]={...v,color:c},s(d)},ColorPicker:Q}}});var cs=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{staticClass:"w-full"},[e("label",{staticClass:"inline-block cursor-pointer py-4"},[e("input",{staticClass:"toggle mr-3 align-middle",attrs:{type:"checkbox"},domProps:{checked:t.allItemsActive},on:{input:s.switchAllItems}}),t._v(" "+t._s(s.t(t.switchAllLabel))+" ")]),e("div",{staticClass:"relative h-items-settings overflow-scroll"},[e("table",{staticClass:"table-zebra table-compact table w-full"},[e("thead",[e("tr",t._l(s.tableFields,function({key:a,label:l}){return e("th",{key:a,staticClass:"sticky top-0"},[t._v(t._s(l))])}),0)]),e("tbody",t._l(s.tableItems,function(a){return e("tr",{key:a.key},t._l(s.tableFields,function({key:l}){return e("td",{key:l,staticClass:"text-base"},[l==="value"?[e("div",[t._v(t._s(a.value))])]:l==="example"?[e("div",{domProps:{innerHTML:t._s(a.example)}})]:l==="color"?[e(s.ColorPicker,{attrs:{value:a.color},on:{selectColor:function(i){return s.setColor(a.key,i)}}})]:l==="bold"?[e("input",{staticClass:"checkbox checkbox-sm",attrs:{type:"checkbox"},domProps:{checked:a.bold},on:{change:function(i){return s.switchBold(a.key)}}})]:l==="activate"?[e("input",{staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:a.active},on:{change:function(i){return s.switchActive(a.key)}}})]:t._e()],2)}),0)}),0)])])])},us=[],ps=m(os,cs,us,!1,null,null,null,null);const _s=ps.exports,ds=g({__name:"TextProfileForm",props:{settings:null},emits:["update-settings","set-language"],setup(n,{emit:t}){const e=n,{t:s}=x(),a=[s("SETTINGS.GENERAL_SETTINGS"),s("SETTINGS.PHONEME_SETTINGS"),s("SETTINGS.LETTER_SETTINGS")],l=T(0),i=p=>t("update-settings",p),r=p=>t("change-language",p),o=S(()=>J(e.settings.language));return{__sfc:!0,props:e,t:s,tabNames:a,activeTabIndex:l,emit:t,emitUpdateSettings:i,emitChangeLanguage:r,languageConfig:o,BaseTabs:He,TextProfileFormGeneralTab:rs,TextProfileFormItemsTab:_s}}});var fs=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",[e(s.BaseTabs,{attrs:{"data-test-id":"tabs",names:s.tabNames},model:{value:s.activeTabIndex,callback:function(a){s.activeTabIndex=a},expression:"activeTabIndex"}}),s.activeTabIndex===0?e(s.TextProfileFormGeneralTab,{key:"general",attrs:{settings:t.settings,"data-test-id":"general"},on:{update:function(a){return s.emitUpdateSettings(a)},"change-language":function(a){return s.emitChangeLanguage(a)}}}):t._e(),s.activeTabIndex===1?e(s.TextProfileFormItemsTab,{key:"phonemes",attrs:{"all-items-active":t.settings.phonemesActive,items:t.settings.phonemes,options:s.languageConfig.phonemeOptions,"table-label":"SETTINGS.PHONEME","switch-all-label":"SETTINGS.ALL_PHONEMES_SETTINGS","data-test-id":"phonemes"},on:{"update-items":function(a){return s.emitUpdateSettings({key:"phonemes",value:a})},"update-active":function(a){return s.emitUpdateSettings({key:"phonemesActive",value:a})}}}):t._e(),s.activeTabIndex===2?e(s.TextProfileFormItemsTab,{key:"letters",attrs:{"all-items-active":t.settings.lettersActive,items:t.settings.letters,options:s.languageConfig.letterOptions,"table-label":"SETTINGS.LETTER","switch-all-label":"SETTINGS.ALL_LETTERS_SETTINGS","data-test-id":"letters"},on:{"update-items":function(a){return s.emitUpdateSettings({key:"letters",value:a})},"update-active":function(a){return s.emitUpdateSettings({key:"lettersActive",value:a})}}}):t._e()],1)},vs=[],gs=m(ds,fs,vs,!1,null,null,null,null);const ms=gs.exports,Ts=g({__name:"TextSettingsFileDownload",props:{settings:null},setup(n){const t=n,e=S(()=>`data:application/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t.settings,null,2))}`);return{__sfc:!0,props:t,settingsFile:e}}});var Es=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("a",{staticClass:"btn-secondary btn-ghost btn-sm btn",attrs:{href:s.settingsFile,"data-test-id":"anchor",download:"settings.json",target:"_blank"}},[t._v(t._s(t.$t("SETTINGS.DOWNLOAD_SETTINGS")))])},Ss=[],bs=m(Ts,Es,Ss,!1,null,null,null,null);const Cs=bs.exports,xs=g({__name:"OptionsPage",setup(n){const t=gt(),{preferences:e}=P(),s=T(null);mt(()=>{"editActiveProfile"in t.currentRoute.query?s.value=e.activeProfileId:"profileId"in t.currentRoute.query&&(s.value=parseInt(t.currentRoute.query.profileId))});const{settings:a,changeLanguage:l,updateSettings:i}=ke(s);return{__sfc:!0,router:t,preferences:e,selectedProfiledId:s,settings:a,changeLanguage:l,updateSettings:i,close:async()=>await Et.closeCurrentTab(),CloseSettings:Tt.CloseSettings,TextProfileEditDropdown:be,TextProfileSaveButton:Ae,TextAdaptationPreview:Dt,TextProfileRenameButton:Oe,TextProfileDeleteButton:Fe,TextProfileForm:ms,TextSettingsFileDownload:Cs}}});var Ps=function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{staticClass:"m-auto max-w-screen-lg p-2"},[e("div",{staticClass:"mb-2 flex items-center bg-base-100"},[e("div",{staticClass:"mr-4 text-2xl font-semibold"},[t._v(t._s(t.$t("SETTINGS.PROFILE"))+":")]),e(s.TextProfileEditDropdown,{staticClass:"w-60",attrs:{settings:s.settings},model:{value:s.selectedProfiledId,callback:function(a){s.selectedProfiledId=a},expression:"selectedProfiledId"}}),e(s.TextProfileRenameButton,{staticClass:"ml-3",attrs:{"profile-id":s.selectedProfiledId}}),e(s.TextSettingsFileDownload,{staticClass:"ml-auto",attrs:{settings:s.settings}})],1),e("div",{staticClass:"flex"},[e(s.TextProfileForm,{staticClass:"w-2/3 min-w-[850px]",attrs:{settings:s.settings},on:{"update-settings":s.updateSettings,"change-language":s.changeLanguage}}),e("div",{staticClass:"flex w-1/3 flex-1 flex-col pl-4 pt-10"},[e("div",{staticClass:"text-2xl font-semibold"},[t._v(t._s(t.$t("SETTINGS.TEXT_PREVIEW")))]),e(s.TextAdaptationPreview,{staticClass:"h-items-settings overflow-scroll",attrs:{settings:s.settings}}),e("div",{staticClass:"mt-auto flex flex-wrap justify-between"},[e(s.TextProfileSaveButton,{attrs:{settings:s.settings},model:{value:s.selectedProfiledId,callback:function(a){s.selectedProfiledId=a},expression:"selectedProfiledId"}}),e(s.TextProfileDeleteButton,{staticClass:"ml-3 mr-auto",model:{value:s.selectedProfiledId,callback:function(a){s.selectedProfiledId=a},expression:"selectedProfiledId"}}),e(s.CloseSettings,{attrs:{"is-settings-dirty":!1},on:{"close-settings":s.close}})],1)],1)],1)])},ys=[],As=m(xs,Ps,ys,!1,null,null,null,null);const Ls=As.exports;export{Ls as OptionsPage};
