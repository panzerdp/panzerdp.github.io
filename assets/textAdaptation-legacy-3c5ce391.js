System.register(["./index-legacy-8c287d4b.js"],(function(t,e){"use strict";var n,r,o,a,i,l,s,c,u,p,d,f;return{setters:[t=>{n=t.d,r=t.n,o=t.m,a=t.p,i=t.q,l=t.t,s=t.w,c=t.a,u=t.r,p=t.v,d=t.x,f=t._}],execute:function(){t("B",r(n({__name:"BaseSelect",props:{value:null,options:null},emits:["input"],setup:(t,{emit:e})=>({__sfc:!0,emit:e,onChange:t=>{e("input",t.target.value)}})}),(function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("select",{staticClass:"select",domProps:{value:t.value},on:{change:n.onChange}},t._l(t.options,(function({value:n,text:r}){return e("option",{key:n,domProps:{value:n}},[t._v(t._s(r))])})),0)}),[],!1,null,null,null,null).exports);var h,v,y,_,g=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,a=[];++n<r;){var i=t[n];e(i,n,t)&&(a[o++]=i)}return a},m=function(t){return t},b=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},$=Math.max,x=function(t,e,n){return e=$(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=$(r.length-e,0),i=Array(a);++o<a;)i[o]=r[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=r[o];return l[e]=n(i),b(t,this,l)}},A=function(t){return function(){return t}},C="object"==typeof o&&o&&o.Object===Object&&o,E="object"==typeof self&&self&&self.Object===Object&&self,S=C||E||Function("return this")(),j=S.Symbol,w=j,O=Object.prototype,T=O.hasOwnProperty,L=O.toString,N=w?w.toStringTag:void 0,z=function(t){var e=T.call(t,N),n=t[N];try{t[N]=void 0;var r=!0}catch(a){}var o=L.call(t);return r&&(e?t[N]=n:delete t[N]),o},F=Object.prototype.toString,P=z,k=function(t){return F.call(t)},I=j?j.toStringTag:void 0,R=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":I&&I in Object(t)?P(t):k(t)},M=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},B=R,H=M,q=function(t){if(!H(t))return!1;var e=B(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},D=S["__core-js_shared__"],V=(h=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",G=function(t){return!!V&&V in t},J=Function.prototype.toString,W=q,X=G,U=M,Y=function(t){if(null!=t){try{return J.call(t)}catch(e){}try{return t+""}catch(e){}}return""},K=/^\[object .+?Constructor\]$/,Q=Function.prototype,Z=Object.prototype,tt=Q.toString,et=Z.hasOwnProperty,nt=RegExp("^"+tt.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=function(t){return!(!U(t)||X(t))&&(W(t)?nt:K).test(Y(t))},ot=function(t,e){return null==t?void 0:t[e]},at=function(t,e){var n=ot(t,e);return rt(n)?n:void 0},it=at,lt=function(){try{var t=it(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),st=A,ct=lt,ut=ct?function(t,e){return ct(t,"toString",{configurable:!0,enumerable:!1,value:st(e),writable:!0})}:m,pt=Date.now,dt=(v=ut,y=0,_=0,function(){var t=pt(),e=16-(t-_);if(_=t,e>0){if(++y>=800)return arguments[0]}else y=0;return v.apply(void 0,arguments)}),ft=m,ht=x,vt=dt,yt=function(t,e){return vt(ht(t,e,ft),t+"")},_t=at(Object,"create"),gt=_t,mt=function(){this.__data__=gt?gt(null):{},this.size=0},bt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$t=_t,xt=Object.prototype.hasOwnProperty,At=function(t){var e=this.__data__;if($t){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return xt.call(e,t)?e[t]:void 0},Ct=_t,Et=Object.prototype.hasOwnProperty,St=_t,jt=mt,wt=bt,Ot=At,Tt=function(t){var e=this.__data__;return Ct?void 0!==e[t]:Et.call(e,t)},Lt=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=St&&void 0===e?"__lodash_hash_undefined__":e,this};function Nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Nt.prototype.clear=jt,Nt.prototype.delete=wt,Nt.prototype.get=Ot,Nt.prototype.has=Tt,Nt.prototype.set=Lt;var zt=Nt,Ft=function(){this.__data__=[],this.size=0},Pt=function(t,e){return t===e||t!=t&&e!=e},kt=function(t,e){for(var n=t.length;n--;)if(Pt(t[n][0],e))return n;return-1},It=kt,Rt=Array.prototype.splice,Mt=kt,Bt=kt,Ht=kt,qt=Ft,Dt=function(t){var e=this.__data__,n=It(e,t);return!(n<0||(n==e.length-1?e.pop():Rt.call(e,n,1),--this.size,0))},Vt=function(t){var e=this.__data__,n=Mt(e,t);return n<0?void 0:e[n][1]},Gt=function(t){return Bt(this.__data__,t)>-1},Jt=function(t,e){var n=this.__data__,r=Ht(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wt.prototype.clear=qt,Wt.prototype.delete=Dt,Wt.prototype.get=Vt,Wt.prototype.has=Gt,Wt.prototype.set=Jt;var Xt=Wt,Ut=at(S,"Map"),Yt=zt,Kt=Xt,Qt=Ut,Zt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},te=function(t,e){var n=t.__data__;return Zt(e)?n["string"==typeof e?"string":"hash"]:n.map},ee=te,ne=te,re=te,oe=te,ae=function(){this.size=0,this.__data__={hash:new Yt,map:new(Qt||Kt),string:new Yt}},ie=function(t){var e=ee(this,t).delete(t);return this.size-=e?1:0,e},le=function(t){return ne(this,t).get(t)},se=function(t){return re(this,t).has(t)},ce=function(t,e){var n=oe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ue(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ue.prototype.clear=ae,ue.prototype.delete=ie,ue.prototype.get=le,ue.prototype.has=se,ue.prototype.set=ce;var pe=ue,de=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},fe=function(t){return this.__data__.has(t)};function he(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new pe;++e<n;)this.add(t[e])}he.prototype.add=he.prototype.push=de,he.prototype.has=fe;var ve=he,ye=function(t,e,n,r){for(var o=t.length,a=n+(r?1:-1);r?a--:++a<o;)if(e(t[a],a,t))return a;return-1},_e=function(t){return t!=t},ge=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1},me=function(t,e,n){return e==e?ge(t,e,n):ye(t,_e,n)},be=function(t,e){return!(null==t||!t.length)&&me(t,e,0)>-1},$e=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1},xe=function(t,e){return t.has(e)},Ae=ve,Ce=be,Ee=$e,Se=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o},je=function(t){return function(e){return t(e)}},we=xe,Oe=function(t,e,n,r){var o=-1,a=Ce,i=!0,l=t.length,s=[],c=e.length;if(!l)return s;n&&(e=Se(e,je(n))),r?(a=Ee,i=!1):e.length>=200&&(a=we,i=!1,e=new Ae(e));t:for(;++o<l;){var u=t[o],p=null==n?u:n(u);if(u=r||0!==u?u:0,i&&p==p){for(var d=c;d--;)if(e[d]===p)continue t;s.push(u)}else a(e,p,r)||s.push(u)}return s},Te=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},Le=function(t){return null!=t&&"object"==typeof t},Ne=R,ze=Le,Fe=function(t){return ze(t)&&"[object Arguments]"==Ne(t)},Pe=Le,ke=Object.prototype,Ie=ke.hasOwnProperty,Re=ke.propertyIsEnumerable,Me=Fe(function(){return arguments}())?Fe:function(t){return Pe(t)&&Ie.call(t,"callee")&&!Re.call(t,"callee")},Be=Me,He=Array.isArray,qe=Be,De=He,Ve=j?j.isConcatSpreadable:void 0,Ge=Te,Je=function(t){return De(t)||qe(t)||!!(Ve&&t&&t[Ve])},We=function t(e,n,r,o,a){var i=-1,l=e.length;for(r||(r=Je),a||(a=[]);++i<l;){var s=e[i];n>0&&r(s)?n>1?t(s,n-1,r,o,a):Ge(a,s):o||(a[a.length]=s)}return a},Xe=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Ue=at(S,"Set"),Ye=function(){},Ke=Ue&&1/Xe(new Ue([,-0]))[1]==1/0?function(t){return new Ue(t)}:Ye,Qe=ve,Ze=be,tn=$e,en=xe,nn=Ke,rn=Xe,on=Oe,an=We,ln=function(t,e,n){var r=-1,o=Ze,a=t.length,i=!0,l=[],s=l;if(n)i=!1,o=tn;else if(a>=200){var c=e?null:nn(t);if(c)return rn(c);i=!1,o=en,s=new Qe}else s=e?[]:l;t:for(;++r<a;){var u=t[r],p=e?e(u):u;if(u=n||0!==u?u:0,i&&p==p){for(var d=s.length;d--;)if(s[d]===p)continue t;e&&s.push(p),l.push(u)}else o(s,p,n)||(s!==l&&s.push(p),l.push(u))}return l},sn=q,cn=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},un=function(t){return null!=t&&cn(t.length)&&!sn(t)},pn=Le,dn=g,fn=function(t,e,n){var r=t.length;if(r<2)return r?ln(t[0]):[];for(var o=-1,a=Array(r);++o<r;)for(var i=t[o],l=-1;++l<r;)l!=o&&(a[o]=on(a[o]||i,t[l],e,n));return ln(an(a,1),e,n)},hn=function(t){return pn(t)&&un(t)},vn=yt((function(t){return fn(dn(t,hn))}));const yn=new Map,_n=(t,e)=>{const n=mn(t),{className:r,value:o}=gn(n,e);t.classList.add(r),yn.set(r,o)},gn=(t,e)=>{const n=`#c8c8c8${e}`,r=t.toFixed(2)+"px",o=(2*t).toFixed(2)+"px",a=`readapt-shade-alternate-lines-${r.replace(/\./,"-")}`;return{className:a,value:`.${a} {\n      background: repeating-linear-gradient(transparent, transparent ${r}, ${n} ${r}, ${n} ${o});\n      background-clip: content-box;\n      background-origin: content-box;\n    }`}},mn=t=>{const e=t.querySelector(".readapt-content"),n=getComputedStyle(e||t),r=parseInt(n.fontSize,10),o="normal"===n.lineHeight?1.2*r:parseFloat(n.lineHeight),a=Math.max(bn(t),null==e?void 0:e.getBoundingClientRect().height);let i=0;if(!isNaN(a)){const t=Math.max(o,r),e=Math.round(a/t);e>0&&(i=a/e)}return Math.max(o,i)},bn=t=>{const e=getComputedStyle(t),n=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom);return t.getBoundingClientRect().height-n},$n=(t,e)=>((t,e)=>{const{fontFamily:n,fontSize:r,letterSpacing:o,wordSpacing:u,lineSpacing:p}=t;return`\n    ${e} .readapt-content { ${(n!==a[0].value?`font-family: ${n};`:"")+(r!==i[0].value?`font-size: ${r};`:"font-size: inherit;")+(o!==l[0].value?`letter-spacing: ${o};`:"")+(u!==s[0].value?`word-spacing: ${u};`:"")+(p!==c[0].value?`line-height: ${t.lineSpacing};`:"")} }\n    ${e} .readapt-content > span { font-size: inherit }\n    ${e} .readapt-content .readapt-bold { font-weight: bold }\n  `})(t,e?`.${e}`:""),xn=(t,e)=>((t,e)=>0===vn(t,e).length)(t,e.classList),An=t=>t.some((t=>t.active)),Cn=(t,e,n)=>r=>{const o=r.nodeValue;if(!o)return;const a=document.createElement("span");if(a.classList.add("readapt-content"),r.before(a),!(t=>{const e=t.syllableActive&&(!!t.syllableColor1||!!t.syllableColor2),n=t.phonemesActive&&An(t.phonemes),r=t.lettersActive&&An(t.letters),o=!!t.liaisonsActive;return e||t.silentLetterActive||r||n||o})(e))return a.textContent=r.textContent,void(r.textContent="");const i=t(o,e.language);o.split("").forEach(((t,r)=>{const o=[];if(e.syllableActive){const t=((t,e)=>{const n=e.findIndex((([e,n])=>t>=e&&t<=n));if(-1!==n)return n%2?"readapt-syllable-2":"readapt-syllable-1"})(r,i.syllables);t&&o.push(t)}if(e.liaisonsActive&&i.liaisons){const t=(l=r,i.liaisons.find((([t,e])=>l>=t&&l<=e)));if(t){const[e,a,i]=t;n.add(i),e===r?o.push("readapt-liaison-start",`readapt-liaison-${i}`):e+1===r?o.push("readapt-liaison-symbol"):a===r&&o.push("readapt-liaison-end")}}var l;let s=!1;const c=i.phonemes[r];if(e.phonemesActive&&"number"==typeof c){const t=((t,e)=>{const n=t.phonemes.find((({active:t,key:n})=>t&&e===parseInt(n))),r=[];return n&&(r.push(`readapt-phoneme-${n.key}`),n.bold&&r.push("readapt-bold")),r})(e,c);s=t.length>0,o.push(...t)}if(e.lettersActive&&!s){const n=((t,e)=>{const n=e.toLowerCase(),r=t.letters.filter((({active:t})=>t)).find((t=>{var e;return null===(e=t.value)||void 0===e?void 0:e.includes(n)}));if(!r)return[];const o=[`readapt-letter-${r.key}`];return r.bold&&o.push("readapt-bold"),o})(e,t);o.push(...n)}e.silentLetterActive&&i.silentLetters.includes(r)&&o.push("readapt-silent-letter");const u=a.lastChild;if(o.length>0)if((null==u?void 0:u.nodeType)===Node.ELEMENT_NODE&&xn(o,u))u.textContent+=t;else{const e=document.createElement("span");e.classList.add(...o),e.textContent=t,a.appendChild(e)}else(null==u?void 0:u.nodeType)===Node.TEXT_NODE?u.textContent+=t:a.appendChild(document.createTextNode(t))})),r.textContent=""},En=(t,e)=>{if(!t.syllableActive)return"";const{syllableOpacity:n,syllableColor1:r,syllableColor2:o}=t;return(r?`${e} .readapt-syllable-1 { background-color: ${r}${n} !important }`:"")+(o?`${e} .readapt-syllable-2 { background-color: ${o}${n} !important }`:"")},Sn=(t,e)=>t.lettersActive?t.letters.filter((({active:t,color:e})=>t&&e)).reduce(((t,n)=>t+`${e} .readapt-letter-${n.key} { color: ${n.color} }`),""):"",jn=(t,e)=>t.phonemesActive?t.phonemes.filter((({active:t,color:e})=>t&&e)).reduce(((t,n)=>t+`${e} .readapt-phoneme-${n.key} { color: ${n.color} }`),""):"",wn=(t,e)=>{if(!t.silentLetterActive)return"";const{silentLetterOpacity:n}=t;return`${e} .readapt-silent-letter { color:rgba(128, 128, 128, ${n})}`},On=(t,e,n)=>{if(!t.liaisonsActive||0===e.size)return"";const{liaisonsOpacity:r}=t,o="#000000"+r;return`${[...e.values()].reduce(((t,e)=>`${t} ${n} .readapt-liaison-${e} { position: relative } ${n} .readapt-liaison-${e}::after { content: '${e}'; position: absolute; right: 0; top: 90%; font-family: Arial; font-size: 70%; color: ${o}; line-height: initial !important;}`),"")} ${n} .readapt-liaison-start { position: relative; outline: 1px solid ${o} } ${n} .readapt-liaison-end { position: relative; outline: 1px solid ${o} } ${n} .readapt-liaison-symbol { position: relative; bottom: -2px; border-bottom: 1px solid ${o}; border-radius: 0 0 30% 30% }`},Tn=t=>(e,n,r)=>{const o=`readapt-${r}`;e.classList.add(o);let a=$n(n,o);const i=(t=>(e,n,r)=>{const o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:t=>{const e=t.parentElement;return e&&["STYLE","SCRIPT","NOSCRIPT"].includes(e.tagName)?NodeFilter.FILTER_REJECT:t.nodeValue&&/\S/.test(t.nodeValue)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),a=Cn(t,n,r);let i;for(;i=o.nextNode();)try{a(i)}catch(l){console.warn("Error when adapting text",i)}})(t),l=new Set;i(e,n,l);const s=((t,e,n)=>{const r=e?`.${e}`:"";let o=En(t,r);return o+=Sn(t,r),o+=wn(t,r),o+=jn(t,r),o+=On(t,n,r),o})(n,o,l);a+=s;const c=Ln(r);c.textContent!==a&&(c.textContent=a);const u=Nn();if(e.setAttribute("data-readapt-id",u),(t=>{const e=Array.from(yn.keys()),n=t=>t.classList.remove(...e);"P"===t.tagName?n(t):Array.from(t.getElementsByTagName("p")).forEach(n)})(e),n.shadeAlternateLinesActive){const t=((t,e,n)=>("P"===t.tagName?_n(t,e):Array.from(t.getElementsByTagName("p")).forEach((t=>_n(t,e))),Array.from(yn.values()).map((t=>`.readapt-${n} ${t}`)).join(" ")))(e,n.shadeAlternateLinesOpacity,r);c.textContent+=" "+t}},Ln=t=>{let e=document.head.querySelector(`[data-readapt-style=${t}]`);return e||(e=document.createElement("style"),e.setAttribute("type","text/css"),e.setAttribute("data-readapt-style",t),document.head.appendChild(e),e)},Nn=()=>Math.random().toString(24).substring(4),zn=(t("b",((t,e)=>{var n;const r=t.find((({key:t})=>t===e.key)),o=null!==(n=null==r?void 0:r.examples)&&void 0!==n?n:[];return zn(o,e)})),(t,{color:e,bold:n})=>{const r=`${e?`color: ${e};`:""} ${n?"font-weight: bold;":""}`;return t.map((t=>t.replace(/<span>/g,`<span style="${r}">`))).map((t=>`<span>${t}</span>`)).join(",&nbsp;")});t("A",r(n({__name:"AdaptContainer",props:{contentToAdapt:null,settings:null,scope:{default:"preview"},adaptHtmlElementAsync:null},setup(t){const e=t,n=u(!0),r=u(),o=async()=>{r.value&&e.contentToAdapt&&e.adaptHtmlElementAsync&&(r.value.innerHTML=e.contentToAdapt,(await e.adaptHtmlElementAsync)(r.value,e.settings,e.scope),n.value=!1)};return p((()=>({...e,containerElement:r})),o,{deep:!0,flush:"post"}),d((()=>(t=>{const e=document.head.querySelector(`[data-readapt-style=${t}]`);e&&e.remove()})(e.scope))),{__sfc:!0,props:e,isLoading:n,containerElement:r,adaptContent:o}}}),(function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[n.isLoading?[e("div",{staticClass:"flex h-full flex-col content-center items-center"},[e("div",{staticClass:"text-xl"},[t._v(t._s(t.$t("LOADING"))+"...")])])]:t._e(),e("div",{class:{"opacity-50":n.isLoading}},[e("div",{ref:"containerElement"})])],2)}),[],!1,null,null,null,null).exports),t("a",(async()=>{const{analyse:t}=await f((()=>e.import("./readapt-text-engine.esm-legacy-a879aea2.js")),void 0);return(t=>Tn(t))(t)}))}}}));
